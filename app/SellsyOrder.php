<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class SellsyOrder extends Model
{
  protected $table = 'sellsy_orders';
  protected $fillable = [
    'sellsy_id',
    'corpname',
    'ownerFullName',
    'status',
    'filename',
    'fileid',
    'nbpages',
    'ident',
    'thirdident',
    'thirdname',
    'thirdid',
    'thirdvatnum',
    'contactId',
    'contactName',
    'displayedDate',
    'currencysymbol',
    'subject',
    'docspeakerText',
    'docspeakerStaffId',
    'docspeakerStaffFullName',
    'corpaddressid',
    'thirdaddressid',
    'shipaddressid',
    'rowsAmount',
    'discountPercent',
    'discountAmount',
    'rowsAmountDiscounted',
    'offerAmount',
    'rowsAmountAllInc',
    'packagingsAmount',
    'shippingsAmount',
    'totalAmountTaxesFree',
    'taxesAmountSum',
    'taxesAmountDetails',
    'totalAmount',
    'useEcotaxe',
    'totalEcoTaxFree',
    'totalEcoTaxInc',
    'ecoTaxId',
    'taxBasis',
    'payDateText',
    'payDateCustom',
    'hasDeadlines',
    'payMediumsText',
    'payCheckOrderText',
    'payBankAccountText',
    'shippingNbParcels',
    'shippingWeight',
    'shippingWeightUnit',
    'shippingVolume',
    'shippingTrackingNumber',
    'shippingTrackingUrl',
    'shippingDate',
    'saveThirdPrefs',
    'displayShipAddress',
    'analyticsCode',
    'recorded',
    'recordable',
    'rateCategory',
    'isTaxesInc',
    'hasDoubleVat',
    'stockImpact',
    'isFromPresta',
    'eCommerceShopId',
    'signcoords',
    'esignID',
    'promotionid',
    'useServiceDates',
    'serviceDateStart',
    'serviceDateStop',
    'locked',
    'reconciledStatus',
    'corpid',
    'ownerid',
    'linkedtype',
    'linkedid',
    'created',
    'prefsid',
    'parentid',
    'docmapid',
    'hasVat',
    'doctypeid',
    'step',
    'doctypestep',
    'expireDate',
    'showSignAndStamp',
    'currencyid',
    'currencyposition',
    'numberformat',
    'numberdecimals',
    'numberthousands',
    'numberprecision',
    'notes',
    'bankaccountid',
    'thirdRelationType',
    'auxCode',
    'thirdemail',
    'thirdtel',
    'thirdmobile',
    'lastpayment',
    'payDateCustomUnix',
    'third_addr_name',
    'third_addr_part1',
    'third_addr_part2',
    'third_addr_part3',
    'third_addr_part4',
    'third_addr_zip',
    'third_addr_town',
    'third_addr_countrycode',
    'ship_addr_name',
    'ship_addr_part1',
    'ship_addr_part2',
    'ship_addr_part3',
    'ship_addr_part4',
    'ship_addr_zip',
    'ship_addr_town',
    'ship_addr_countrycode',
    'note',
    'step_color',
    'step_hex',
    'step_label',
    'step_css',
    'step_banner',
    'step_id',
    'doctypestep_color',
    'doctypestep_hex',
    'doctypestep_label',
    'doctypestep_css',
    'doctypestep_id',
    'displayed_payMediumsText',
    'formatted_totalAmount',
    'formatted_totalAmountTaxesFree',
    'formatted_created',
    'formatted_displayedDate',
    'formatted_payDateCustom',
    'formatted_serviceDateStart',
    'formatted_serviceDateStop',
    'formatted_lastSepaExportDate',
    'formatted_lastpayment',
    'formatted_expireDate',
    'noedit',
    'publicLinkShort',
    'address',
    'shippingAddress',
    'weightFormatted',
    'weightFormattedDisplayed',
    'thirdStatus',
  ];

  protected $hidden = [
    'step_css',
    'step_banner',
    'step_id',
    'doctypestep_color',
    'doctypestep_hex',
    'doctypestep_label',
    'doctypestep_css',
    'doctypestep_id',
    'ship_addr_name',
    'ship_addr_part1',
    'ship_addr_part2',
    'ship_addr_part3',
    'ship_addr_part4',
    'ship_addr_zip',
    'ship_addr_town',
    'ship_addr_countrycode',
    'showSignAndStamp',
    'currencyid',
    'currencyposition',
    'numberformat',
    'numberdecimals',
    'numberthousands',
    'numberprecision',
  ];

  protected $with = [
    'invoices',
  ];

  public function invoices() {
    return $this->hasMany(SellsyInvoice::class, 'parentid', 'sellsy_id');
  }

  public function client() {
    return $this->belongsTo(SellsyClient::class, 'thirdid', 'sellsy_id');
  }
}
